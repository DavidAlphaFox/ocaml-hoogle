<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Digest.html">
<link rel="next" href="Event.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Arg" rel="Chapter" href="Arg.html">
<link title="Arith_status" rel="Chapter" href="Arith_status.html">
<link title="Array" rel="Chapter" href="Array.html">
<link title="ArrayLabels" rel="Chapter" href="ArrayLabels.html">
<link title="Big_int" rel="Chapter" href="Big_int.html">
<link title="Bigarray" rel="Chapter" href="Bigarray.html">
<link title="Buffer" rel="Chapter" href="Buffer.html">
<link title="Callback" rel="Chapter" href="Callback.html">
<link title="CamlinternalLazy" rel="Chapter" href="CamlinternalLazy.html">
<link title="CamlinternalMod" rel="Chapter" href="CamlinternalMod.html">
<link title="CamlinternalOO" rel="Chapter" href="CamlinternalOO.html">
<link title="Char" rel="Chapter" href="Char.html">
<link title="Complex" rel="Chapter" href="Complex.html">
<link title="Condition" rel="Chapter" href="Condition.html">
<link title="Dbm" rel="Chapter" href="Dbm.html">
<link title="Digest" rel="Chapter" href="Digest.html">
<link title="Dynlink" rel="Chapter" href="Dynlink.html">
<link title="Event" rel="Chapter" href="Event.html">
<link title="Filename" rel="Chapter" href="Filename.html">
<link title="Format" rel="Chapter" href="Format.html">
<link title="Gc" rel="Chapter" href="Gc.html">
<link title="Genlex" rel="Chapter" href="Genlex.html">
<link title="Graphics" rel="Chapter" href="Graphics.html">
<link title="GraphicsX11" rel="Chapter" href="GraphicsX11.html">
<link title="Hashtbl" rel="Chapter" href="Hashtbl.html">
<link title="Int32" rel="Chapter" href="Int32.html">
<link title="Int64" rel="Chapter" href="Int64.html">
<link title="Lazy" rel="Chapter" href="Lazy.html">
<link title="Lexing" rel="Chapter" href="Lexing.html">
<link title="List" rel="Chapter" href="List.html">
<link title="ListLabels" rel="Chapter" href="ListLabels.html">
<link title="Map" rel="Chapter" href="Map.html">
<link title="Marshal" rel="Chapter" href="Marshal.html">
<link title="MoreLabels" rel="Chapter" href="MoreLabels.html">
<link title="Mutex" rel="Chapter" href="Mutex.html">
<link title="Nativeint" rel="Chapter" href="Nativeint.html">
<link title="Num" rel="Chapter" href="Num.html">
<link title="Obj" rel="Chapter" href="Obj.html">
<link title="Oo" rel="Chapter" href="Oo.html">
<link title="Parsing" rel="Chapter" href="Parsing.html">
<link title="Pervasives" rel="Chapter" href="Pervasives.html">
<link title="Printexc" rel="Chapter" href="Printexc.html">
<link title="Printf" rel="Chapter" href="Printf.html">
<link title="Queue" rel="Chapter" href="Queue.html">
<link title="Random" rel="Chapter" href="Random.html">
<link title="Scanf" rel="Chapter" href="Scanf.html">
<link title="Set" rel="Chapter" href="Set.html">
<link title="Sort" rel="Chapter" href="Sort.html">
<link title="Stack" rel="Chapter" href="Stack.html">
<link title="StdLabels" rel="Chapter" href="StdLabels.html">
<link title="Str" rel="Chapter" href="Str.html">
<link title="Stream" rel="Chapter" href="Stream.html">
<link title="String" rel="Chapter" href="String.html">
<link title="StringLabels" rel="Chapter" href="StringLabels.html">
<link title="Sys" rel="Chapter" href="Sys.html">
<link title="Thread" rel="Chapter" href="Thread.html">
<link title="ThreadUnix" rel="Chapter" href="ThreadUnix.html">
<link title="Tk" rel="Chapter" href="Tk.html">
<link title="Unix" rel="Chapter" href="Unix.html">
<link title="UnixLabels" rel="Chapter" href="UnixLabels.html">
<link title="Weak" rel="Chapter" href="Weak.html"><link title="Dynamic loading of compiled files" rel="Section" href="#6_Dynamicloadingofcompiledfiles">
<link title="Access control" rel="Section" href="#6_Accesscontrol">
<link title="Deprecated, low-level API for access control" rel="Section" href="#6_DeprecatedlowlevelAPIforaccesscontrol">
<link title="Deprecated, initialization" rel="Section" href="#6_Deprecatedinitialization">
<link title="Error reporting" rel="Section" href="#6_Errorreporting">
<title>Dynlink</title>
</head>
<body>
<div class="navbar"><a href="Digest.html">Previous</a>
&nbsp;<a href="index.html">Up</a>
&nbsp;<a href="Event.html">Next</a>
</div>
<center><h1>Module <a href="type_Dynlink.html">Dynlink</a></h1></center>
<br>
<pre><span class="keyword">module</span> Dynlink: <code class="code"><span class="keyword">sig</span></code> <a href="Dynlink.html">..</a> <code class="code"><span class="keyword">end</span></code></pre>Dynamic loading of object files.<br>
<hr width="100%">
<pre><span class="keyword">val</span> <a name="VALis_native"></a>is_native : <code class="type">bool</code></pre><div class="info">
<code class="code"><span class="keyword">true</span></code> if the program is native,
    <code class="code"><span class="keyword">false</span></code> if the program is bytecode.<br>
</div>
<br>
<a name="6_Dynamicloadingofcompiledfiles"></a>
<h6>Dynamic loading of compiled files</h6><br>
<pre><span class="keyword">val</span> <a name="VALloadfile"></a>loadfile : <code class="type">string -> unit</code></pre><div class="info">
In bytecode: load the given bytecode object file (<code class="code">.cmo</code> file) or
    bytecode library file (<code class="code">.cma</code> file), and link it with the running 
    program. In native code: load the given OCaml plugin file (usually
    <code class="code">.cmxs</code>), and link it with the running 
    program.
    All toplevel expressions in the loaded compilation units
    are evaluated. No facilities are provided to
    access value names defined by the unit. Therefore, the unit
    must register itself its entry points with the main program,
    e.g. by modifying tables of functions.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALloadfile_private"></a>loadfile_private : <code class="type">string -> unit</code></pre><div class="info">
Same as <code class="code">loadfile</code>, except that the compilation units just loaded
    are hidden (cannot be referenced) from other modules dynamically
    loaded afterwards.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALadapt_filename"></a>adapt_filename : <code class="type">string -> string</code></pre><div class="info">
In bytecode, the identity function. In native code, replace the last
    extension with <code class="code">.cmxs</code>.<br>
</div>
<br>
<a name="6_Accesscontrol"></a>
<h6>Access control</h6><br>
<pre><span class="keyword">val</span> <a name="VALallow_only"></a>allow_only : <code class="type">string list -> unit</code></pre><div class="info">
<code class="code">allow_only units</code> restricts the compilation units that dynamically-linked
    units can reference: it only allows references to the units named in
    list <code class="code">units</code>.  References to any other compilation unit will cause
    a <code class="code"><span class="constructor">Unavailable_unit</span></code> error during <code class="code">loadfile</code> or <code class="code">loadfile_private</code>.
<p>

    Initially (just after calling <code class="code">init</code>), all compilation units composing
    the program currently running are available for reference from
    dynamically-linked units.  <code class="code">allow_only</code> can be used to grant access
    to some of them only, e.g. to the units that compose the API for
    dynamically-linked code, and prevent access to all other units,
    e.g. private, internal modules of the running program.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALprohibit"></a>prohibit : <code class="type">string list -> unit</code></pre><div class="info">
<code class="code">prohibit units</code> prohibits dynamically-linked units from referencing
    the units named in list <code class="code">units</code>.  This can be used to prevent
    access to selected units, e.g. private, internal modules of
    the running program.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALdefault_available_units"></a>default_available_units : <code class="type">unit -> unit</code></pre><div class="info">
Reset the set of units that can be referenced from dynamically-linked
    code to its default value, that is, all units composing the currently
    running program.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALallow_unsafe_modules"></a>allow_unsafe_modules : <code class="type">bool -> unit</code></pre><div class="info">
Govern whether unsafe object files are allowed to be
    dynamically linked. A compilation unit is ``unsafe'' if it contains
    declarations of external functions, which can break type safety.
    By default, dynamic linking of unsafe object files is
    not allowed. In native code, this function does nothing; object files
    with external functions are always allowed to be dynamically linked.<br>
</div>
<br>
<a name="6_DeprecatedlowlevelAPIforaccesscontrol"></a>
<h6>Deprecated, low-level API for access control</h6><br>
<pre><span class="keyword">val</span> <a name="VALadd_interfaces"></a>add_interfaces : <code class="type">string list -> string list -> unit</code></pre><div class="info">
<code class="code">add_interfaces units path</code> grants dynamically-linked object
    files access to the compilation  units named in list <code class="code">units</code>.
    The interfaces (<code class="code">.cmi</code> files) for these units are searched in
    <code class="code">path</code> (a list of directory names).<br>
</div>
<pre><span class="keyword">val</span> <a name="VALadd_available_units"></a>add_available_units : <code class="type">(string * <a href="Digest.html#TYPEt">Digest.t</a>) list -> unit</code></pre><div class="info">
Same as <a href="Dynlink.html#VALadd_interfaces"><code class="code"><span class="constructor">Dynlink</span>.add_interfaces</code></a>, but instead of searching <code class="code">.cmi</code> files
    to find the unit interfaces, uses the interface digests given
    for each unit. This way, the <code class="code">.cmi</code> interface files need not be
    available at run-time. The digests can be extracted from <code class="code">.cmi</code>
    files using the <code class="code">extract_crc</code> program installed in the
    Objective Caml standard library directory.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALclear_available_units"></a>clear_available_units : <code class="type">unit -> unit</code></pre><div class="info">
Empty the list of compilation units accessible to dynamically-linked
    programs.<br>
</div>
<br>
<a name="6_Deprecatedinitialization"></a>
<h6>Deprecated, initialization</h6><br>
<pre><span class="keyword">val</span> <a name="VALinit"></a>init : <code class="type">unit -> unit</code></pre><div class="info">
<span class="warning">Deprecated.</span>Initialize the <code class="code"><span class="constructor">Dynlink</span></code> library. This function is called
    automatically when needed.<br>
</div>
<br>
<a name="6_Errorreporting"></a>
<h6>Error reporting</h6><br>
<br><code><span class="keyword">type</span> <a name="TYPElinking_error"></a><code class="type"></code>linking_error = </code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Undefined_global</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Unavailable_primitive</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Uninitialized_global</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr></table>


<br><code><span class="keyword">type</span> <a name="TYPEerror"></a><code class="type"></code>error = </code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Not_a_bytecode_file</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Inconsistent_import</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Unavailable_unit</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Unsafe_file</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Linking_error</span> <span class="keyword">of</span> <code class="type">string * <a href="Dynlink.html#TYPElinking_error">linking_error</a></code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Corrupted_interface</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">File_not_found</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Cannot_open_dll</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Inconsistent_implementation</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr></table>


<pre><span class="keyword">exception</span> <a name="EXCEPTIONError"></a>Error <span class="keyword">of</span> <code class="type"><a href="Dynlink.html#TYPEerror">error</a></code></pre>
<div class="info">
Errors in dynamic linking are reported by raising the <code class="code"><span class="constructor">Error</span></code>
    exception with a description of the error.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALerror_message"></a>error_message : <code class="type"><a href="Dynlink.html#TYPEerror">error</a> -> string</code></pre><div class="info">
Convert an error description to a printable message.<br>
</div>
</body></html>